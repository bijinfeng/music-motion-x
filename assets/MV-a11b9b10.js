import{n as v,u as m,s as x,e as d,m as f,a as r,F as y,j as s,L as g,M as I,d as N,q as w,i as n}from"./index-db6e8751.js";const $=({url:a,cover:c})=>{const i=m(e=>e.setShowPlayBar);return s("video",{allowFullScreen:!0,style:{width:"100%"},onPlay:()=>{i(!1)},onEnded:()=>{i(!0)},onPause:()=>{i(!0)},className:" sticky top-0 z-[501]",src:a??"",controls:!0,poster:c,"x5-video-player-type":"h5","x5-video-orientation":"landscape|portrait",playsInline:!0,"webkit-playsinline":"true"})},P=()=>{const{mvid:a}=v(),c=m(t=>t.setShowPlayBar),i=x(),{data:e}=d(`/api/mv/detail?mvid=${a}`,()=>n.get(`/api/mv/detail?mvid=${a}`).then(t=>t.data.data).then(t=>({artistName:t.artistName,artistId:t.artistId,desc:t.desc,title:t.name,publicTime:t.publishTime,cover:t.cover}))),{data:u}=d(a?`/api/mv/url?id=${a}`:"",()=>a?n.get(`/api/mv/url?id=${a}`).then(t=>t.data.data.url.replace(/https?/,"https")):null),{data:p}=d(e?.artistId?[`/api/artists?id=${e?.artistId}`,e?.artistId]:"",()=>e?.artistId?n.get(`/api/artists?id=${e.artistId}`).then(t=>t.data).then(t=>{const{artist:o}=t;return o.picUrl}):null,{suspense:!1}),{data:h}=d(`/api/simi/mv?mvid=${a}`,()=>n.get(`/api/simi/mv?mvid=${a}`).then(t=>t.data).then(t=>{const{mvs:o}=t;return o.map(l=>({desc:"",imgUrl:l.cover?l.cover.replace(/https?/,"https"):"",title:l.name,id:l.id}))}));return f(()=>()=>{c(!0)},[i.pathname]),r(y,{children:[s($,{url:u??void 0,cover:e?.cover}),r("div",{className:"px-4 mt-6",children:[s("div",{className:" text-fg text-xl font-bold leading-snug",children:e?.title}),s(g,{to:`/artist/${e?.artistId}`,children:r("div",{className:" flex items-center mt-4",children:[s(I,{url:p||"",className:" w-10 h-10 rounded-[50%]"}),s("p",{className:" text-fg text-sm ml-2",children:e?.artistName})]})}),r("div",{className:" flex flex-col mt-4",children:[r("p",{className:" text-dg text-sm",children:["发布时间：",e?.publicTime]}),s("p",{className:" text-dg text-sm mt-3",children:e?.desc})]}),s(N,{title:"相似MV",showMore:!1}),s("div",{className:"flex flex-wrap  justify-between",children:s(w,{list:h??void 0,placeHolderCount:4})})]})]})};export{P as default};
