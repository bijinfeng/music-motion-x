import{i as dt,f as vt,r as pt,n as b,t as yt,e as mt,g as rt,R as nt,a as B,b as it,c as y,h as st,p as Q,m as J,S as H,d as X,j as Y,k as G,o as j,l as I,q as K,s as Z,Q as ut,v as tt,w as gt,x as $,y as bt,z as Ot,A as Ct,B as Mt}from"./useQuery-99551319.js";import{C as te,F as ee,G as re,E as ne,D as ie,u as se,H as ue}from"./useQuery-99551319.js";import{R as m,b as Pt}from"./index-401e96bf.js";import{_ as d}from"./extends-98964cd2.js";import{_ as U}from"./inheritsLoose-54b40604.js";var qt=function(){function a(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var i=a.prototype;return i.setOptions=function(t){var e;this.options=d({},this.defaultOptions,t),this.meta=t?.meta,this.cacheTime=Math.max(this.cacheTime||0,(e=this.options.cacheTime)!=null?e:5*60*1e3)},i.setDefaultOptions=function(t){this.defaultOptions=t},i.scheduleGc=function(){var t=this;this.clearGcTimeout(),dt(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){t.optionalRemove()},this.cacheTime))},i.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},i.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},i.setData=function(t,e){var r,u,s=this.state.data,o=vt(t,s);return(r=(u=this.options).isDataEqual)!=null&&r.call(u,s,o)?o=s:this.options.structuralSharing!==!1&&(o=pt(s,o)),this.dispatch({data:o,type:"success",dataUpdatedAt:e?.updatedAt}),o},i.setState=function(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})},i.cancel=function(t){var e,r=this.promise;return(e=this.retryer)==null||e.cancel(t),r?r.then(b).catch(b):Promise.resolve()},i.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},i.reset=function(){this.destroy(),this.setState(this.initialState)},i.isActive=function(){return this.observers.some(function(t){return t.options.enabled!==!1})},i.isFetching=function(){return this.state.isFetching},i.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(t){return t.getCurrentResult().isStale})},i.isStaleByTime=function(t){return t===void 0&&(t=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!yt(this.state.dataUpdatedAt,t)},i.onFocus=function(){var t,e=this.observers.find(function(r){return r.shouldFetchOnWindowFocus()});e&&e.refetch(),(t=this.retryer)==null||t.continue()},i.onOnline=function(){var t,e=this.observers.find(function(r){return r.shouldFetchOnReconnect()});e&&e.refetch(),(t=this.retryer)==null||t.continue()},i.addObserver=function(t){this.observers.indexOf(t)===-1&&(this.observers.push(t),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))},i.removeObserver=function(t){this.observers.indexOf(t)!==-1&&(this.observers=this.observers.filter(function(e){return e!==t}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:t}))},i.getObserversCount=function(){return this.observers.length},i.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},i.fetch=function(t,e){var r=this,u,s,o;if(this.state.isFetching){if(this.state.dataUpdatedAt&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){var l=this.observers.find(function(C){return C.options.queryFn});l&&this.setOptions(l.options)}var h=mt(this.queryKey),f=rt(),v={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(v,"signal",{enumerable:!0,get:function(){if(f)return r.abortSignalConsumed=!0,f.signal}});var p=function(){return r.options.queryFn?(r.abortSignalConsumed=!1,r.options.queryFn(v)):Promise.reject("Missing queryFn")},g={fetchOptions:e,options:this.options,queryKey:h,state:this.state,fetchFn:p,meta:this.meta};if((u=this.options.behavior)!=null&&u.onFetch){var O;(O=this.options.behavior)==null||O.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((s=g.fetchOptions)==null?void 0:s.meta)){var F;this.dispatch({type:"fetch",meta:(F=g.fetchOptions)==null?void 0:F.meta})}return this.retryer=new nt({fn:g.fetchFn,abort:f==null||(o=f.abort)==null?void 0:o.bind(f),onSuccess:function(M){r.setData(M),r.cache.config.onSuccess==null||r.cache.config.onSuccess(M,r),r.cacheTime===0&&r.optionalRemove()},onError:function(M){B(M)&&M.silent||r.dispatch({type:"error",error:M}),B(M)||(r.cache.config.onError==null||r.cache.config.onError(M,r),it().error(M)),r.cacheTime===0&&r.optionalRemove()},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},i.dispatch=function(t){var e=this;this.state=this.reducer(this.state,t),y.batch(function(){e.observers.forEach(function(r){r.onQueryUpdate(t)}),e.cache.notify({query:e,type:"queryUpdated",action:t})})},i.getDefaultState=function(t){var e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof t.initialData<"u",u=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,s=typeof e<"u";return{data:e,dataUpdateCount:0,dataUpdatedAt:s?u??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:s?"success":"idle"}},i.reducer=function(t,e){var r,u;switch(e.type){case"failed":return d({},t,{fetchFailureCount:t.fetchFailureCount+1});case"pause":return d({},t,{isPaused:!0});case"continue":return d({},t,{isPaused:!1});case"fetch":return d({},t,{fetchFailureCount:0,fetchMeta:(r=e.meta)!=null?r:null,isFetching:!0,isPaused:!1},!t.dataUpdatedAt&&{error:null,status:"loading"});case"success":return d({},t,{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:(u=e.dataUpdatedAt)!=null?u:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var s=e.error;return B(s)&&s.revert&&this.revertState?d({},this.revertState):d({},t,{error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return d({},t,{isInvalidated:!0});case"setState":return d({},t,e.state);default:return t}},a}(),Qt=function(a){U(i,a);function i(t){var e;return e=a.call(this)||this,e.config=t||{},e.queries=[],e.queriesMap={},e}var n=i.prototype;return n.build=function(e,r,u){var s,o=r.queryKey,c=(s=r.queryHash)!=null?s:st(o,r),l=this.get(c);return l||(l=new qt({cache:this,queryKey:o,queryHash:c,options:e.defaultQueryOptions(r),state:u,defaultOptions:e.getQueryDefaults(o),meta:r.meta}),this.add(l)),l},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(function(u){return u!==e}),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;y.batch(function(){e.queries.forEach(function(r){e.remove(r)})})},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,r){var u=Q(e,r),s=u[0];return typeof s.exact>"u"&&(s.exact=!0),this.queries.find(function(o){return J(s,o)})},n.findAll=function(e,r){var u=Q(e,r),s=u[0];return Object.keys(s).length>0?this.queries.filter(function(o){return J(s,o)}):this.queries},n.notify=function(e){var r=this;y.batch(function(){r.listeners.forEach(function(u){u(e)})})},n.onFocus=function(){var e=this;y.batch(function(){e.queries.forEach(function(r){r.onFocus()})})},n.onOnline=function(){var e=this;y.batch(function(){e.queries.forEach(function(r){r.onOnline()})})},i}(H),Ft=function(){function a(n){this.options=d({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||at(),this.meta=n.meta}var i=a.prototype;return i.setState=function(t){this.dispatch({type:"setState",state:t})},i.addObserver=function(t){this.observers.indexOf(t)===-1&&this.observers.push(t)},i.removeObserver=function(t){this.observers=this.observers.filter(function(e){return e!==t})},i.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(b).catch(b)):Promise.resolve()},i.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},i.execute=function(){var t=this,e,r=this.state.status==="loading",u=Promise.resolve();return r||(this.dispatch({type:"loading",variables:this.options.variables}),u=u.then(function(){t.mutationCache.config.onMutate==null||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return t.options.onMutate==null?void 0:t.options.onMutate(t.state.variables)}).then(function(s){s!==t.state.context&&t.dispatch({type:"loading",context:s,variables:t.state.variables})})),u.then(function(){return t.executeMutation()}).then(function(s){e=s,t.mutationCache.config.onSuccess==null||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return t.options.onSuccess==null?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(s){return t.mutationCache.config.onError==null||t.mutationCache.config.onError(s,t.state.variables,t.state.context,t),it().error(s),Promise.resolve().then(function(){return t.options.onError==null?void 0:t.options.onError(s,t.state.variables,t.state.context)}).then(function(){return t.options.onSettled==null?void 0:t.options.onSettled(void 0,s,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:s}),s})})},i.executeMutation=function(){var t=this,e;return this.retryer=new nt({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:(e=this.options.retry)!=null?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},i.dispatch=function(t){var e=this;this.state=Rt(this.state,t),y.batch(function(){e.observers.forEach(function(r){r.onMutationUpdate(t)}),e.mutationCache.notify(e)})},a}();function at(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Rt(a,i){switch(i.type){case"failed":return d({},a,{failureCount:a.failureCount+1});case"pause":return d({},a,{isPaused:!0});case"continue":return d({},a,{isPaused:!1});case"loading":return d({},a,{context:i.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:i.variables});case"success":return d({},a,{data:i.data,error:null,status:"success",isPaused:!1});case"error":return d({},a,{data:void 0,error:i.error,failureCount:a.failureCount+1,isPaused:!1,status:"error"});case"setState":return d({},a,i.state);default:return a}}var _t=function(a){U(i,a);function i(t){var e;return e=a.call(this)||this,e.config=t||{},e.mutations=[],e.mutationId=0,e}var n=i.prototype;return n.build=function(e,r,u){var s=new Ft({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:u,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0,meta:r.meta});return this.add(s),s},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter(function(r){return r!==e}),e.cancel(),this.notify(e)},n.clear=function(){var e=this;y.batch(function(){e.mutations.forEach(function(r){e.remove(r)})})},n.getAll=function(){return this.mutations},n.find=function(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(function(r){return X(e,r)})},n.findAll=function(e){return this.mutations.filter(function(r){return X(e,r)})},n.notify=function(e){var r=this;y.batch(function(){r.listeners.forEach(function(u){u(e)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter(function(r){return r.state.isPaused});return y.batch(function(){return e.reduce(function(r,u){return r.then(function(){return u.continue().catch(b)})},Promise.resolve())})},i}(H);function k(){return{onFetch:function(i){i.fetchFn=function(){var n,t,e,r,u,s,o=(n=i.fetchOptions)==null||(t=n.meta)==null?void 0:t.refetchPage,c=(e=i.fetchOptions)==null||(r=e.meta)==null?void 0:r.fetchMore,l=c?.pageParam,h=c?.direction==="forward",f=c?.direction==="backward",v=((u=i.state.data)==null?void 0:u.pages)||[],p=((s=i.state.data)==null?void 0:s.pageParams)||[],g=rt(),O=g?.signal,F=p,C=!1,M=i.options.queryFn||function(){return Promise.reject("Missing queryFn")},T=function(R,S,P,x){return F=x?[S].concat(F):[].concat(F,[S]),x?[P].concat(R):[].concat(R,[P])},E=function(R,S,P,x){if(C)return Promise.reject("Cancelled");if(typeof P>"u"&&!S&&R.length)return Promise.resolve(R);var _={queryKey:i.queryKey,signal:O,pageParam:P,meta:i.meta},A=M(_),w=Promise.resolve(A).then(function(ht){return T(R,P,ht,x)});if(Y(A)){var N=w;N.cancel=A.cancel}return w},q;if(!v.length)q=E([]);else if(h){var z=typeof l<"u",ct=z?l:L(i.options,v);q=E(v,z,ct)}else if(f){var V=typeof l<"u",ft=V?l:ot(i.options,v);q=E(v,V,ft,!0)}else(function(){F=[];var D=typeof i.options.getNextPageParam>"u",R=o&&v[0]?o(v[0],0,v):!0;q=R?E([],D,p[0]):Promise.resolve(T([],p[0],v[0]));for(var S=function(_){q=q.then(function(A){var w=o&&v[_]?o(v[_],_,v):!0;if(w){var N=D?p[_]:L(i.options,A);return E(A,D,N)}return Promise.resolve(T(A,p[_],v[_]))})},P=1;P<v.length;P++)S(P)})();var W=q.then(function(D){return{pages:D,pageParams:F}}),lt=W;return lt.cancel=function(){C=!0,g?.abort(),Y(q)&&q.cancel()},W}}}}function L(a,i){return a.getNextPageParam==null?void 0:a.getNextPageParam(i[i.length-1],i)}function ot(a,i){return a.getPreviousPageParam==null?void 0:a.getPreviousPageParam(i[0],i)}function Dt(a,i){if(a.getNextPageParam&&Array.isArray(i)){var n=L(a,i);return typeof n<"u"&&n!==null&&n!==!1}}function At(a,i){if(a.getPreviousPageParam&&Array.isArray(i)){var n=ot(a,i);return typeof n<"u"&&n!==null&&n!==!1}}var jt=function(){function a(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Qt,this.mutationCache=n.mutationCache||new _t,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var i=a.prototype;return i.mount=function(){var t=this;this.unsubscribeFocus=G.subscribe(function(){G.isFocused()&&j.isOnline()&&(t.mutationCache.onFocus(),t.queryCache.onFocus())}),this.unsubscribeOnline=j.subscribe(function(){G.isFocused()&&j.isOnline()&&(t.mutationCache.onOnline(),t.queryCache.onOnline())})},i.unmount=function(){var t,e;(t=this.unsubscribeFocus)==null||t.call(this),(e=this.unsubscribeOnline)==null||e.call(this)},i.isFetching=function(t,e){var r=Q(t,e),u=r[0];return u.fetching=!0,this.queryCache.findAll(u).length},i.isMutating=function(t){return this.mutationCache.findAll(d({},t,{fetching:!0})).length},i.getQueryData=function(t,e){var r;return(r=this.queryCache.find(t,e))==null?void 0:r.state.data},i.getQueriesData=function(t){return this.getQueryCache().findAll(t).map(function(e){var r=e.queryKey,u=e.state,s=u.data;return[r,s]})},i.setQueryData=function(t,e,r){var u=I(t),s=this.defaultQueryOptions(u);return this.queryCache.build(this,s).setData(e,r)},i.setQueriesData=function(t,e,r){var u=this;return y.batch(function(){return u.getQueryCache().findAll(t).map(function(s){var o=s.queryKey;return[o,u.setQueryData(o,e,r)]})})},i.getQueryState=function(t,e){var r;return(r=this.queryCache.find(t,e))==null?void 0:r.state},i.removeQueries=function(t,e){var r=Q(t,e),u=r[0],s=this.queryCache;y.batch(function(){s.findAll(u).forEach(function(o){s.remove(o)})})},i.resetQueries=function(t,e,r){var u=this,s=Q(t,e,r),o=s[0],c=s[1],l=this.queryCache,h=d({},o,{active:!0});return y.batch(function(){return l.findAll(o).forEach(function(f){f.reset()}),u.refetchQueries(h,c)})},i.cancelQueries=function(t,e,r){var u=this,s=Q(t,e,r),o=s[0],c=s[1],l=c===void 0?{}:c;typeof l.revert>"u"&&(l.revert=!0);var h=y.batch(function(){return u.queryCache.findAll(o).map(function(f){return f.cancel(l)})});return Promise.all(h).then(b).catch(b)},i.invalidateQueries=function(t,e,r){var u,s,o,c=this,l=Q(t,e,r),h=l[0],f=l[1],v=d({},h,{active:(u=(s=h.refetchActive)!=null?s:h.active)!=null?u:!0,inactive:(o=h.refetchInactive)!=null?o:!1});return y.batch(function(){return c.queryCache.findAll(h).forEach(function(p){p.invalidate()}),c.refetchQueries(v,f)})},i.refetchQueries=function(t,e,r){var u=this,s=Q(t,e,r),o=s[0],c=s[1],l=y.batch(function(){return u.queryCache.findAll(o).map(function(f){return f.fetch(void 0,d({},c,{meta:{refetchPage:o?.refetchPage}}))})}),h=Promise.all(l).then(b);return c?.throwOnError||(h=h.catch(b)),h},i.fetchQuery=function(t,e,r){var u=I(t,e,r),s=this.defaultQueryOptions(u);typeof s.retry>"u"&&(s.retry=!1);var o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)},i.prefetchQuery=function(t,e,r){return this.fetchQuery(t,e,r).then(b).catch(b)},i.fetchInfiniteQuery=function(t,e,r){var u=I(t,e,r);return u.behavior=k(),this.fetchQuery(u)},i.prefetchInfiniteQuery=function(t,e,r){return this.fetchInfiniteQuery(t,e,r).then(b).catch(b)},i.cancelMutations=function(){var t=this,e=y.batch(function(){return t.mutationCache.getAll().map(function(r){return r.cancel()})});return Promise.all(e).then(b).catch(b)},i.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},i.executeMutation=function(t){return this.mutationCache.build(this,t).execute()},i.getQueryCache=function(){return this.queryCache},i.getMutationCache=function(){return this.mutationCache},i.getDefaultOptions=function(){return this.defaultOptions},i.setDefaultOptions=function(t){this.defaultOptions=t},i.setQueryDefaults=function(t,e){var r=this.queryDefaults.find(function(u){return K(t)===K(u.queryKey)});r?r.defaultOptions=e:this.queryDefaults.push({queryKey:t,defaultOptions:e})},i.getQueryDefaults=function(t){var e;return t?(e=this.queryDefaults.find(function(r){return Z(t,r.queryKey)}))==null?void 0:e.defaultOptions:void 0},i.setMutationDefaults=function(t,e){var r=this.mutationDefaults.find(function(u){return K(t)===K(u.mutationKey)});r?r.defaultOptions=e:this.mutationDefaults.push({mutationKey:t,defaultOptions:e})},i.getMutationDefaults=function(t){var e;return t?(e=this.mutationDefaults.find(function(r){return Z(t,r.mutationKey)}))==null?void 0:e.defaultOptions:void 0},i.defaultQueryOptions=function(t){if(t?._defaulted)return t;var e=d({},this.defaultOptions.queries,this.getQueryDefaults(t?.queryKey),t,{_defaulted:!0});return!e.queryHash&&e.queryKey&&(e.queryHash=st(e.queryKey,e)),e},i.defaultQueryObserverOptions=function(t){return this.defaultQueryOptions(t)},i.defaultMutationOptions=function(t){return t?._defaulted?t:d({},this.defaultOptions.mutations,this.getMutationDefaults(t?.mutationKey),t,{_defaulted:!0})},i.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},a}(),St=function(a){U(i,a);function i(t,e){var r;return r=a.call(this)||this,r.client=t,r.queries=[],r.result=[],r.observers=[],r.observersMap={},e&&r.setQueries(e),r}var n=i.prototype;return n.onSubscribe=function(){var e=this;this.listeners.length===1&&this.observers.forEach(function(r){r.subscribe(function(u){e.onUpdate(r,u)})})},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.destroy=function(){this.listeners=[],this.observers.forEach(function(e){e.destroy()})},n.setQueries=function(e,r){this.queries=e,this.updateObservers(r)},n.getCurrentResult=function(){return this.result},n.getOptimisticResult=function(e){return this.findMatchingObservers(e).map(function(r){return r.observer.getOptimisticResult(r.defaultedQueryOptions)})},n.findMatchingObservers=function(e){var r=this,u=this.observers,s=e.map(function(p){return r.client.defaultQueryObserverOptions(p)}),o=s.flatMap(function(p){var g=u.find(function(O){return O.options.queryHash===p.queryHash});return g!=null?[{defaultedQueryOptions:p,observer:g}]:[]}),c=o.map(function(p){return p.defaultedQueryOptions.queryHash}),l=s.filter(function(p){return!c.includes(p.queryHash)}),h=u.filter(function(p){return!o.some(function(g){return g.observer===p})}),f=l.map(function(p,g){if(p.keepPreviousData){var O=h[g];if(O!==void 0)return{defaultedQueryOptions:p,observer:O}}return{defaultedQueryOptions:p,observer:r.getObserver(p)}}),v=function(g,O){return s.indexOf(g.defaultedQueryOptions)-s.indexOf(O.defaultedQueryOptions)};return o.concat(f).sort(v)},n.getObserver=function(e){var r=this.client.defaultQueryObserverOptions(e),u=this.observersMap[r.queryHash];return u??new ut(this.client,r)},n.updateObservers=function(e){var r=this;y.batch(function(){var u=r.observers,s=r.findMatchingObservers(r.queries);s.forEach(function(f){return f.observer.setOptions(f.defaultedQueryOptions,e)});var o=s.map(function(f){return f.observer}),c=Object.fromEntries(o.map(function(f){return[f.options.queryHash,f]})),l=o.map(function(f){return f.getCurrentResult()}),h=o.some(function(f,v){return f!==u[v]});u.length===o.length&&!h||(r.observers=o,r.observersMap=c,r.result=l,r.hasListeners()&&(tt(u,o).forEach(function(f){f.destroy()}),tt(o,u).forEach(function(f){f.subscribe(function(v){r.onUpdate(f,v)})}),r.notify()))})},n.onUpdate=function(e,r){var u=this.observers.indexOf(e);u!==-1&&(this.result=gt(this.result,u,r),this.notify())},n.notify=function(){var e=this;y.batch(function(){e.listeners.forEach(function(r){r(e.result)})})},i}(H),Et=function(a){U(i,a);function i(t,e){return a.call(this,t,e)||this}var n=i.prototype;return n.bindMethods=function(){a.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},n.setOptions=function(e,r){a.prototype.setOptions.call(this,d({},e,{behavior:k()}),r)},n.getOptimisticResult=function(e){return e.behavior=k(),a.prototype.getOptimisticResult.call(this,e)},n.fetchNextPage=function(e){var r;return this.fetch({cancelRefetch:(r=e?.cancelRefetch)!=null?r:!0,throwOnError:e?.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:e?.pageParam}}})},n.fetchPreviousPage=function(e){var r;return this.fetch({cancelRefetch:(r=e?.cancelRefetch)!=null?r:!0,throwOnError:e?.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:e?.pageParam}}})},n.createResult=function(e,r){var u,s,o,c,l,h,f=e.state,v=a.prototype.createResult.call(this,e,r);return d({},v,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Dt(r,(u=f.data)==null?void 0:u.pages),hasPreviousPage:At(r,(s=f.data)==null?void 0:s.pages),isFetchingNextPage:f.isFetching&&((o=f.fetchMeta)==null||(c=o.fetchMore)==null?void 0:c.direction)==="forward",isFetchingPreviousPage:f.isFetching&&((l=f.fetchMeta)==null||(h=l.fetchMore)==null?void 0:h.direction)==="backward"})},i}(ut),xt=function(a){U(i,a);function i(t,e){var r;return r=a.call(this)||this,r.client=t,r.setOptions(e),r.bindMethods(),r.updateResult(),r}var n=i.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}},n.onMutationUpdate=function(e){this.updateResult();var r={listeners:!0};e.type==="success"?r.onSuccess=!0:e.type==="error"&&(r.onError=!0),this.notify(r)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,d({},this.options,{variables:typeof e<"u"?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:at(),r=d({},e,{isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=r},n.notify=function(e){var r=this;y.batch(function(){r.mutateOptions&&(e.onSuccess?(r.mutateOptions.onSuccess==null||r.mutateOptions.onSuccess(r.currentResult.data,r.currentResult.variables,r.currentResult.context),r.mutateOptions.onSettled==null||r.mutateOptions.onSettled(r.currentResult.data,null,r.currentResult.variables,r.currentResult.context)):e.onError&&(r.mutateOptions.onError==null||r.mutateOptions.onError(r.currentResult.error,r.currentResult.variables,r.currentResult.context),r.mutateOptions.onSettled==null||r.mutateOptions.onSettled(void 0,r.currentResult.error,r.currentResult.variables,r.currentResult.context))),e.listeners&&r.listeners.forEach(function(u){u(r.currentResult)})})},i}(H);function $t(a){return{mutationKey:a.options.mutationKey,state:a.state}}function Ut(a){return{state:a.state,queryKey:a.queryKey,queryHash:a.queryHash}}function wt(a){return a.state.isPaused}function Kt(a){return a.state.status==="success"}function kt(a,i){var n,t;i=i||{};var e=[],r=[];if(((n=i)==null?void 0:n.dehydrateMutations)!==!1){var u=i.shouldDehydrateMutation||wt;a.getMutationCache().getAll().forEach(function(o){u(o)&&e.push($t(o))})}if(((t=i)==null?void 0:t.dehydrateQueries)!==!1){var s=i.shouldDehydrateQuery||Kt;a.getQueryCache().getAll().forEach(function(o){s(o)&&r.push(Ut(o))})}return{mutations:e,queries:r}}function It(a,i,n){if(!(typeof i!="object"||i===null)){var t=a.getMutationCache(),e=a.getQueryCache(),r=i.mutations||[],u=i.queries||[];r.forEach(function(s){var o;t.build(a,d({},n==null||(o=n.defaultOptions)==null?void 0:o.mutations,{mutationKey:s.mutationKey}),s.state)}),u.forEach(function(s){var o,c=e.get(s.queryHash);if(c){c.state.dataUpdatedAt<s.state.dataUpdatedAt&&c.setState(s.state);return}e.build(a,d({},n==null||(o=n.defaultOptions)==null?void 0:o.queries,{queryKey:s.queryKey,queryHash:s.queryHash}),s.state)})}}var et=function(i,n,t,e){var r=i.isFetching(n);t!==r&&e(r)};function Lt(a,i){var n=m.useRef(!1),t=$(),e=Q(a,i),r=e[0],u=m.useState(t.isFetching(r)),s=u[0],o=u[1],c=m.useRef(r);c.current=r;var l=m.useRef(s);return l.current=s,m.useEffect(function(){n.current=!0,et(t,c.current,l.current,o);var h=t.getQueryCache().subscribe(y.batchCalls(function(){n.current&&et(t,c.current,l.current,o)}));return function(){n.current=!1,h()}},[t]),s}function zt(a,i){var n=m.useRef(!1),t=bt(a,i),e=$(),r=m.useState(e.isMutating(t)),u=r[0],s=r[1],o=m.useRef(t);o.current=t;var c=m.useRef(u);return c.current=u,m.useEffect(function(){n.current=!0;var l=e.getMutationCache().subscribe(y.batchCalls(function(){if(n.current){var h=e.isMutating(o.current);c.current!==h&&s(h)}}));return function(){n.current=!1,l()}},[e]),u}function Vt(a,i,n){var t=m.useRef(!1),e=m.useState(0),r=e[1],u=Ot(a,i,n),s=$(),o=m.useRef();o.current?o.current.setOptions(u):o.current=new xt(s,u);var c=o.current.getCurrentResult();m.useEffect(function(){t.current=!0;var h=o.current.subscribe(y.batchCalls(function(){t.current&&r(function(f){return f+1})}));return function(){t.current=!1,h()}},[]);var l=m.useCallback(function(h,f){o.current.mutate(h,f).catch(b)},[]);if(c.error&&Ct(void 0,o.current.options.useErrorBoundary,[c.error]))throw c.error;return d({},c,{mutate:l,mutateAsync:c.mutate})}function Wt(a){var i=m.useRef(!1),n=m.useState(0),t=n[1],e=$(),r=Pt.useMemo(function(){return a.map(function(c){var l=e.defaultQueryObserverOptions(c);return l.optimisticResults=!0,l})},[a,e]),u=m.useState(function(){return new St(e,r)}),s=u[0],o=s.getOptimisticResult(r);return m.useEffect(function(){i.current=!0;var c=s.subscribe(y.batchCalls(function(){i.current&&t(function(l){return l+1})}));return function(){i.current=!1,c()}},[s]),m.useEffect(function(){s.setQueries(r,{listeners:!1})},[r,s]),o}function Jt(a,i,n){var t=I(a,i,n);return Mt(t,Et)}function Ht(a,i){var n=$(),t=m.useRef(i);t.current=i,m.useMemo(function(){a&&It(n,a,t.current)},[n,a])}var Xt=function(i){var n=i.children,t=i.options,e=i.state;return Ht(e,t),n};export{te as CancelledError,Xt as Hydrate,Et as InfiniteQueryObserver,_t as MutationCache,xt as MutationObserver,St as QueriesObserver,Qt as QueryCache,jt as QueryClient,ee as QueryClientProvider,re as QueryErrorResetBoundary,ut as QueryObserver,kt as dehydrate,G as focusManager,K as hashQueryKey,It as hydrate,B as isCancelledError,ne as isError,y as notifyManager,j as onlineManager,ie as setLogger,Ht as useHydrate,Jt as useInfiniteQuery,Lt as useIsFetching,zt as useIsMutating,Vt as useMutation,Wt as useQueries,se as useQuery,$ as useQueryClient,ue as useQueryErrorResetBoundary};
